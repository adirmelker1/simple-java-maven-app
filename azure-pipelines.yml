# Starter pipeline


# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  - none

pool:
  name: "Default"

steps:
  - script: echo Hello, world!
    displayName: "Run a one-line script"

  - task: Docker@2
    inputs:
      containerRegistry: 'Docker Hub'
      repository: 'adir395/my-app'
      command: 'buildAndPush'
      Dockerfile: '**/Dockerfile'
  - script: |
      docker pull adir395/my-app:latest
      docker run -d --name test-container -p 8080:8080 adir395/my-app:latest
      sleep 10
      docker logs test-container
      docker ps      
    displayName: "Docker Download and run"
